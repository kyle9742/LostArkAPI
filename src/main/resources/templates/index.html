<!doctype html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/basic.html}">
<head>
    <title>LostArkAPI - Main</title>
</head>

<div layout:fragment="content">
    <div class="container">
        <div class="notices d-flex flex-wrap">

        </div>
        <div class="events d-flex flex-wrap">

        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script th:src="@{/js/Notices.js}"></script>
    <script th:src="@{/js/Events.js}"></script>
</div>

<script layout:fragment="script" th:inline="javascript">
    const noticesDiv = document.querySelector('.notices')
    const eventsDiv = document.querySelector('.events');

    let datas;

    function printEvents() {

        let str = '';

        getEvents().then(data => {

            for (const item of data) {

                str += `<div class="card col-3">
                            <a href="${item.Link}"><img src="${item.Thumbnail}" class="card-img-top" alt="eventImage"></a>
                            <div class="card-body">
                                <h5 class="card-title">${item.Title}</h5>
                                <p class="card-text">시작날짜 : ${`${item.StartDate}`.substring(0,10)}</p>
                                <p class="card-text">종료날짜 : ${`${item.EndDate}`.substring(0,10)}</p>
                            </div>
                        </div>`
            }
            eventsDiv.innerHTML = str;

        }).catch(e => {
            console.log(e)
        });

    }

    function printNotices() {

        let str = '';

        getNotices().then(data => {
            str += `<ul>`;

            for(let i = 0 ; i < 10 ; i++) {
                str += `<a href="${data[i].Link}"><li>${data[i].Title}</li></a>`
            }
            str += `</ul>`;
            noticesDiv.innerHTML = str;
        }).catch(e => {
            console.log(e)
        });
    }
    printEvents();
    printNotices();

</script>

</html>